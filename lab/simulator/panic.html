<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Anxiety Awareness (Educational)</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: rgba(255, 255, 255, 1);
        transition: background 1s;
        font-family: Arial, sans-serif;
      }
      #warning {
        padding: 50px;
        text-align: center;
      }
      @keyframes appear {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        100% {
          opacity: 0.7;
          transform: scale(1);
        }
      }
      @keyframes fadeOut {
        0% {
          opacity: 0.7;
        }
        100% {
          opacity: 0;
        }
      }
      .thought {
        position: absolute;
        pointer-events: none;
        opacity: 0;
        animation: appear 1.5s ease-out forwards,
          fadeOut 0.5s ease-out 3s forwards;
        max-width: 200px;
        word-wrap: break-word;
        padding: 8px;
        border-radius: 4px;
      }
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        opacity: 0;
        transition: all 2s;
      }
      #vignette {
        box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.7);
      }
      #pulse {
        background: radial-gradient(
          circle,
          transparent 60%,
          rgba(255, 50, 50, 0.1)
        );
        animation: pulse 2s ease-in-out infinite;
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }
      #hr-container {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: #000;
        padding: 10px;
        border-radius: 5px;
        color: white;
      }
      .hr-line {
        width: 200px;
        height: 2px;
        background: #ff0000;
        margin: 2px 0;
        transition: all 0.3s;
      }
      button {
        padding: 10px 20px;
        background: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #45a049;
      }
    </style>
  </head>
  <body>
    <div id="warning">
      <h2>⚠️ Anxiety Awareness Simulation</h2>
      <p>
        This educational tool demonstrates common experiences during anxiety
        episodes.<br />
        <button onclick="startExperience()">
          I Understand - Begin Simulation
        </button>
      </p>
      <p>
        <small>Note: This is not a clinical tool. Duration: 1 minute.</small>
      </p>
    </div>

    <div id="experience" style="display: none">
      <div class="overlay" id="vignette"></div>
      <div class="overlay" id="pulse"></div>
    </div>

    <div id="hr-container">
      <div class="hr-line" style="width: 80%"></div>
      <div class="hr-line" style="width: 60%"></div>
      <div class="hr-line" style="width: 90%"></div>
      <div style="color: #ff0000; font-family: monospace">HR: 60 BPM</div>
    </div>

    <script>
      let currentDelay = 2500;
      const minDelay = 150;
      let intensity = 1;
      let timeoutId;
      let isRunning = false;
      const maxThoughts = 100;
      let hrInterval;

      const thoughts = [
        "What if...",
        "I can't",
        "Danger",
        "Help",
        "Can't breathe",
        "Why me?",
        "Stop now",
        "Too much",
        "Losing control",
        "Trapped",
        "Heart racing",
        "Going to die",
        "Can't think",
        "Nobody understands",
        "Not safe",
        "Something's wrong",
        "Can't escape",
        "Why now?",
        "Body failing",
        "Going crazy",
        "Embarrassing",
        "Never ends",
        "Alone",
        "Weak",
        "Why panic?",
        "Overwhelmed",
        "Can't focus",
        "Not real",
        "Fake it",
        "Judged",
        "Numb",
        "Shaking",
        "Chest hurts",
        "Dizzy",
        "Suffocating",
        "Tunnel vision",
        "Fading",
        "Make it stop",
        "Going to faint",
        "Out of control",
        "I'm trapped",
        "No way out",
        "Not again",
        "Can't handle this",
        "This is it",
        "I'm losing it",
        "Can't stop shaking",
        "Please help me",
        "What's happening?",
        "I'm so scared",
        "It's all too much",
        "Can't move",
        "I'm helpless",
        "Why can't I calm down?",
        "Everything's spinning",
        "Heart won't slow down",
        "Feel so unreal",
        "Don't want to be here",
        "I'm breaking down",
        "Can't take deep breaths",
        "Need to run",
        "Everyone's staring",
        "Feel so small",
        "Mind won't stop racing",
        "Everything's wrong",
        "Can't find peace",
        "My mind's a mess",
        "I can't cope",
        "Feel claustrophobic",
        "Need to escape",
        "I'm going to collapse",
        "No one can help",
        "Why can't I be normal?",
        "I'm so tired of this",
        "Why can't this stop?",
      ];

      function startExperience() {
        document.getElementById("warning").style.display = "none";
        document.getElementById("experience").style.display = "block";
        isRunning = true;
        document.body.style.backgroundColor = "#f0f0f0";

        document
          .querySelectorAll(".overlay")
          .forEach((el) => (el.style.opacity = 1));
        simulateHeartRate();
        scheduleThought();
        timeoutId = setTimeout(endExperience, 60000);
      }

      function scheduleThought() {
        if (!isRunning) return;
        createThought();
        currentDelay = Math.max(minDelay, currentDelay * 0.9);
        setTimeout(scheduleThought, currentDelay);
      }

      function createThought() {
        const thought = document.createElement("div");
        thought.className = "thought";
        thought.textContent =
          thoughts[Math.floor(Math.random() * thoughts.length)];

        thought.style.left = `${10 + Math.random() * 80}%`;
        thought.style.top = `${10 + Math.random() * 80}%`;
        thought.style.color = `hsl(${Math.random() * 360}, 70%, ${
          40 - intensity
        }%)`;
        thought.style.fontSize = `${14 + intensity}px`;
        thought.style.transform = `rotate(${Math.random() * 10 - 5}deg)`;
        thought.style.opacity = `${0.8 - intensity / 50}`;

        document.getElementById("experience").appendChild(thought);

        const allThoughts = document.getElementsByClassName("thought");
        if (allThoughts.length > maxThoughts) {
          allThoughts[0].style.transition = "opacity 2s";
          allThoughts[0].style.opacity = "0";
          setTimeout(() => allThoughts[0].remove(), 2000);
        }
        intensity = Math.min(50, intensity + 0.5);
      }

      function simulateHeartRate() {
        let baseHr = 60;
        hrInterval = setInterval(() => {
          const lines = document.querySelectorAll(".hr-line");
          lines.forEach((line) => {
            const variation = Math.random() * 20 * intensity;
            line.style.width = `${50 + intensity * 20 + variation}%`;
          });
          baseHr = Math.min(160, 60 + intensity * 30);
          document.getElementById("hr-container").innerHTML = `
                        <div class="hr-line"></div>
                        <div class="hr-line"></div>
                        <div class="hr-line"></div>
                        <div style="color: #ff0000; font-family: monospace;">HR: ${Math.floor(
                          baseHr
                        )} BPM</div>
                    `;
        }, 300);
      }

      function endExperience() {
        isRunning = false;
        clearTimeout(timeoutId);
        clearInterval(hrInterval);
        document.getElementById("experience").style.display = "none";
        document.body.style.backgroundColor = "#f0fff4";

        Array.from(document.getElementsByClassName("thought")).forEach(
          (thought) => {
            thought.style.transition = "opacity 2s";
            thought.style.opacity = "0";
            setTimeout(() => thought.remove(), 2000);
          }
        );
      }
    </script>
  </body>
</html>
